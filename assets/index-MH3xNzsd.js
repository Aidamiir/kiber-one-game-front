import{u as b,j as n,a as h,r,s as N,c as g,C as f}from"./index-Cvn7UMsq.js";import{F as w}from"./fade-up-animation-BvBe6Zie.js";import{B as $}from"./balance-7VzW9BH3.js";const B="_stats_1ow3d_1",C="_body_1ow3d_5",I="_img_1ow3d_14",S="_content_1ow3d_21",k="_contentInner_1ow3d_27",q="_coins_1ow3d_33",T="_league_1ow3d_38",t={stats:B,body:C,img:I,content:S,contentInner:k,coins:q,league:T},E=()=>{const{data:e}=b();return n.jsx("div",{className:t.stats,children:n.jsxs("div",{className:t.body,children:[n.jsxs("div",{className:t.content,children:[n.jsx("div",{className:t.img}),n.jsxs("div",{className:t.contentInner,children:[n.jsx("div",{className:t.name,children:e&&e.first_name}),n.jsxs("div",{className:t.coins,children:[n.jsx("img",{src:"./images/coin.svg",alt:"coind"}),e&&e.balance]})]})]}),n.jsx("div",{className:t.league,children:"Bronze"})]})})},P="_container_fealq_1",z="_content_fealq_6",A="_inner_fealq_12",F="_myStats_fealq_20",H="_league_fealq_28",d={container:P,content:z,inner:A,myStats:F,league:H},R="_content_tnvl8_1",U="_coinBody_tnvl8_8",X="_coin_tnvl8_8",Y="_energy_tnvl8_27",D="_popup_tnvl8_31",_={content:R,coinBody:U,coin:X,energy:Y,popup:D,"popup-animation":"_popup-animation_tnvl8_1"},M=()=>{const{id:e,balance_amount:m}=h(({user:s})=>s.user),[c,a]=r.useState([]),o=r.useRef(!1),u=r.useCallback((s,i)=>{N.emit("changeBalance",{id:e});const l={id:Date.now(),x:s,y:i,value:`+${m}`};a(x=>[...x,l]),setTimeout(()=>{a(x=>x.filter(v=>v.id!==l.id))},1e3)},[e,m]),j=r.useCallback(s=>{o.current||u(s.clientX,s.clientY),o.current=!1},[u]),p=r.useCallback(s=>{o.current=!0;for(let i=0;i<s.touches.length;i++){const l=s.touches[i];u(l.clientX,l.clientY)}},[u]);return n.jsxs("div",{className:_.content,children:[n.jsx("div",{className:_.coinBody,children:n.jsx("button",{className:g(_.coin,"active"),type:"button",onTouchStart:p,children:n.jsx("img",{src:"./images/coin.svg",alt:"Монетка",onClick:j})})}),n.jsx(L,{className:_.energy}),c.map(s=>n.jsx("div",{className:_.popup,style:{top:s.y,left:s.x},children:s.value},s.id))]})},Q="_energy_v8ywb_1",G="_bar_v8ywb_7",J="_barInner_v8ywb_15",K="_body_v8ywb_21",y={energy:Q,bar:G,barInner:J,body:K},L=e=>{const{className:m}=e,{energy:c,max_energy:a}=h(({user:o})=>o.user);return n.jsxs("div",{className:g(m,y.energy),children:[n.jsxs("div",{className:y.body,children:[n.jsx("span",{children:"⚡"}),n.jsx("span",{children:c})]}),n.jsx("div",{className:y.bar,children:c&&a&&n.jsx("div",{className:y.barInner,style:{width:`${c/a*100}%`}})})]})};function Z(){return n.jsx(w,{className:"page",children:n.jsx(f,{className:d.container,children:n.jsxs("div",{className:d.content,children:[n.jsx(E,{}),n.jsxs("div",{className:d.inner,children:[n.jsxs("div",{className:d.myStats,children:[n.jsx($,{}),n.jsx("div",{className:d.league,children:"Bronze"})]}),n.jsx(M,{})]})]})})})}export{Z as default};
